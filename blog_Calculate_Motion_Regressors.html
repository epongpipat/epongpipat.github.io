<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Calculate 24-Motion Variables</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116039246-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-116039246-1');
</script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 54px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h2 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h3 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h4 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h5 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h6 {
  padding-top: 59px;
  margin-top: -59px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("blog_Calculate_Motion_Regressors.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">



<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">

    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="navbar-brand" href="index.html"><span class="fas fa-terminal" aria-hidden="true"></span></a>
      <a class="navbar-brand" href="index.html"><img src="images/icons8-artificial-intelligence-100.png" style="height: 20px"></a>
      <a class="navbar-brand" href="index.html"><img src="images/icons8-scatter-plot-96.png" style="height: 20px"></a>
      <a class="navbar-brand" href="index.html">Ekarin Eric Pongpipat, M.A.</a>
    </div> <!-- /.navbar-header -->

    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="blog.html"><span class="fas fa-quote-left" aria-hidden="true"></span> &ensp;Blog</a></li>
        <li><a href="CV.html"><span class="far fa-id-badge" aria-hidden="true"></span> &ensp;CV</a></li>
        <li><a href="https://github.com/epongpipat" target="_blank"><span class="fa fa-github" aria-hidden="true"></span> &ensp;GitHub</a></li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="fas fa-handshake" aria-hidden="true"></span> &ensp;Connect<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="mailto:epongpipat@gmail.com" target="_blank"><span class="fa fa-envelope" aria-hidden="true"></span> &ensp;Email</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="https://www.researchgate.net/profile/Ekarin_Pongpipat" target="_blank"><span class="fab fa-researchgate" aria-hidden="true"></span> &ensp;ResearchGate</a></li>
            <li><a href="https://www.linkedin.com/in/epongpipat/" target="_blank"><span class="fa fa-linkedin" aria-hidden="true"></span> &ensp;LinkedIn</a></li>
          </ul>
        </li>

      </ul>
    </div> <!-- /.navbar-collapse -->

  </div> <!-- /.container -->
</nav> <!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Calculate 24-Motion Variables</h1>
<h3 class="subtitle"><em>A quick guide to calculating 24-motion variables</em></h3>
<h4 class="date"><em>Original Post: 2018-03-20</em></h4>

</div>


<h4>
<i>Modified Post: 2018-09-06</i>
</h4>
<h4>
<i>Modified Post: 2019-03-24</i>
</h4>
<p><br><em>Tags:</em> <span class="badge badge-pill badge-dark">fMRI</span> <span class="badge badge-pill badge-primary">R</span></p>
<p>These motion variables can be used as control variables (covariates of no interest; as seen in resting-state and task-based functional connectivity analyses).</p>
<div id="r-libraries" class="section level2">
<h2>R Libraries</h2>
<pre class="r"><code>library(tidyverse)</code></pre>
</div>
<div id="function" class="section level2">
<h2>Function</h2>
<pre class="r"><code># graph motion parameters, facet by motion type
graph_motion &lt;- function(dataset, title) {
  data_long &lt;- reshape2::melt(dataset, id.var = &quot;Duration&quot;) %&gt;%
    mutate(variable = gsub(&quot;_&quot;, &quot; &quot;, variable))
  figure &lt;- ggplot(data_long, aes(x = Duration, y = value)) +
    geom_line(color = &quot;#106a8c&quot;) +
    theme_minimal() +
    facet_wrap(~ variable, scales = &quot;free_y&quot;, ncol = 3) +
    labs(title = title,
         y = NULL) +
    theme(plot.title = element_text(hjust = 0.5))
  print(figure)
}</code></pre>
<p><BR><BR></p>
</div>
<div id="rigid-body-motion-regressors" class="section level2">
<h2>6-Rigid Body Motion Regressors</h2>
<p>The first six motion parameters are the standard motion parameters and include:</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(translation_X\)</span>, translation in the x-direction</li>
<li><span class="math inline">\(translation_Y\)</span>, translation in the y-direction</li>
<li><span class="math inline">\(translation_Z\)</span>, translation in the z-direction</li>
<li><span class="math inline">\(rotation_X\)</span>, rotation around the x-axis</li>
<li><span class="math inline">\(rotation_Y\)</span>, rotation around the y-axis</li>
<li><span class="math inline">\(rotation_Z\)</span>, rotation around the z-axis</li>
</ol>
<pre class="r"><code># load 6-rigidy body motion parameters
# add duration
motion_file &lt;- &quot;blog_Calculate_Motion_Regressors_files/example_motion_demeand.csv&quot;
motion_demeaned &lt;- read_csv(motion_file, col_names = F) %&gt;%
  mutate(Duration = c(1:nrow(.)))

# rename columns
motion_variables &lt;- c(paste0(&quot;Translation_&quot;, c(&quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;)),
                      paste0(&quot;Rotation_&quot;, c(&quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;)))
colnames(motion_demeaned) &lt;- c(motion_variables, &quot;Duration&quot;)

# graph motion parameters
graph_motion(motion_demeaned, &quot;6-Rigid Body Motion Parameters&quot;)</code></pre>
<p><img src="blog_Calculate_Motion_Regressors_files/figure-html/m6-1.svg" width="672" /></p>
<p><BR><BR></p>
</div>
<div id="motion-regressors" class="section level2">
<h2>12-Motion Regressors</h2>
<p>The next six motion parameters are the first temporal derivatives of the original six rigid body motion parameters. Specifically, it is the motion minus the motion from the previous time point.</p>
<ol start="7" style="list-style-type: decimal">
<li><span class="math inline">\(translation_{X_{T-1}}\)</span>, first temporal derivative of the translation in the x-direction</li>
<li><span class="math inline">\(translation_{Y_{T-1}}\)</span>, first temporal derivative of the translation in the y-direction</li>
<li><span class="math inline">\(translation_{Z_{T-1}}\)</span>, first temporal derivative of the translation in the z-direction</li>
<li><span class="math inline">\(rotation_{X_{T-1}}\)</span> first temporal derivative of the rotation around the x-axis</li>
<li><span class="math inline">\(rotation_{Y_{T-1}}\)</span>, first temporal derivative of the rotation around the y-axis</li>
<li><span class="math inline">\(rotation_{Z_{T-1}}\)</span>, first temporal derivative of the rotation around the z-axis</li>
</ol>
<pre class="r"><code># calculate first temporal derivative
motion_demeaned_td1 &lt;- motion_demeaned %&gt;%
  sapply(., FUN = function(x) c(NA, diff(x))) %&gt;%
  as_tibble() %&gt;%
  mutate(Duration = c(1:nrow(.)))
  
# rename columns
colnames(motion_demeaned_td1) &lt;- c(paste0(motion_variables, &quot;_TD1&quot;), &quot;Duration&quot;)

# graph motion parameters
graph_motion(motion_demeaned_td1, &quot;First Temporal Derivatives of the 6-Rigid Body Motion Parameters&quot;)</code></pre>
<p><img src="blog_Calculate_Motion_Regressors_files/figure-html/m12-1.svg" width="672" /></p>
<p><BR><BR></p>
</div>
<div id="motion-regressors-1" class="section level2">
<h2>18-Motion Regressors</h2>
<p>The next six motion parameters are the original six rigid body motion parameters squared:</p>
<ol start="13" style="list-style-type: decimal">
<li><span class="math inline">\(translation_X^2\)</span>, translation in the x-direction squared</li>
<li><span class="math inline">\(translation_Y^2\)</span>, translation in the y-direction squared</li>
<li><span class="math inline">\(translation_Z^2\)</span>, translation in the z-direction squared</li>
<li><span class="math inline">\(rotation_X^2\)</span>, rotation around the x-axis squared</li>
<li><span class="math inline">\(rotation_Y^2\)</span>, rotation around the y-axis squared</li>
<li><span class="math inline">\(rotation_Z^2\)</span>, rotation around the z-axis squared</li>
</ol>
<pre class="r"><code># square 6-rigid body motion parameters
motion_demeaned_sq &lt;- motion_demeaned^2 %&gt;%
  as_tibble() %&gt;%
  mutate(Duration = c(1:nrow(.)))
  
# rename columns
colnames(motion_demeaned_sq) &lt;- c(paste0(motion_variables, &quot;_Squared&quot;), &quot;Duration&quot;)

# graph motion parameters
graph_motion(motion_demeaned_sq, &quot;6-Rigid Body Motion Parameters Squared&quot;)</code></pre>
<p><img src="blog_Calculate_Motion_Regressors_files/figure-html/m18-1.svg" width="672" /></p>
<p><BR><BR></p>
</div>
<div id="motion-regressors-2" class="section level2">
<h2>24-Motion Regressors</h2>
<p>The next six motion parameters are the first temporal derivatives squared.</p>
<ol start="19" style="list-style-type: decimal">
<li><span class="math inline">\(translation_{X_{T-1}}^2\)</span>, first temporal derivative of the translation in the x-direction squared</li>
<li><span class="math inline">\(translation_{Y_{T-1}}^2\)</span>, first temporal derivative of the translation in the y-direction squared</li>
<li><span class="math inline">\(translation_{Z_{T-1}}^2\)</span>, first temporal derivative of the translation in the z-direction squared</li>
<li><span class="math inline">\(rotation_{X_{T-1}}^2\)</span>, first temporal derivative of the rotation around the x-axis squared</li>
<li><span class="math inline">\(rotation_{Y_{T-1}}^2\)</span> first temporal derivative of the rotation around the y-axis squared</li>
<li><span class="math inline">\(rotation_{Z_{T-1}}^2\)</span>, first temporal derivative of the rotation around the z-axis squared</li>
</ol>
<pre class="r"><code># square the first temporal derivative
motion_demeaned_td1_sq &lt;- motion_demeaned_td1^2 %&gt;%
  as_tibble() %&gt;%
  mutate(Duration = 1:nrow(.)) 

# rename columns
colnames(motion_demeaned_td1_sq) &lt;- c(paste0(motion_variables, &quot;_TD1_Squared&quot;), &quot;Duration&quot;)

# plot motion.td1.sq into one figure
graph_motion(motion_demeaned_td1_sq, &quot;First Temporal Derivatives of the 6-Rigid Body Motion Parameters Squared&quot;)</code></pre>
<p><img src="blog_Calculate_Motion_Regressors_files/figure-html/m24-1.svg" width="672" /></p>
<p><BR><BR></p>
</div>
<div id="r-code-example" class="section level2">
<h2>R Code Example</h2>
<pre class="r"><code># function to create 24 motion variables =======================================
create_24_motion_variables &lt;- function(dataset) {
  # mean-center (demean) ----
  # subtract each score from its respective column mean
  dataset_motion_demeaned &lt;- scale(x = dataset, center = T, scale = F)

  # first temporal derivatives ----
  # subtract motion from prior motion time point
  dataset_motion_td1 &lt;- sapply(dataset_motion_demeaned, FUN = function(x) c(NA, diff(x)))

  # combine the variables into one dataset
  dataset_motion &lt;- data.frame(dataset_motion_demeaned, dataset_motion_td1)

  # squares ----
  # square 6-rigid body motion parameters and its temporal derivatives
  dataset_motion_squared &lt;- dataset_motion^2

  # combine the variables into one dataset
  dataset_motion &lt;- data.frame(dataset_motion, dataset_motion_squared)

  return(dataset_motion)
}

# load 6-rigid body motion parameters file =====================================
# assign to dataset_motion
dataset_motion &lt;- read.csv(file.choose())

# create 24 motion variables using function ====================================
# assign output to dataset_motion_24
dataset_motion_24 &lt;- create_24_motion_variables(dataset = dataset_motion)

# rename columns ===============================================================
# assign original motion variables
motion_variables &lt;- c(
  &quot;translation_x&quot;, &quot;translation_y&quot;, &quot;translation_z&quot;,
  &quot;rotation_x&quot;, &quot;rotation_y&quot;, &quot;rotation_z&quot;
)

# rename columns
colnames(dataset_motion_24) &lt;- c(
  motion_variables,
  paste0(motion_variables, &quot;_td1&quot;),
  paste0(motion_variables, &quot;_squared&quot;),
  paste0(motion_variables, &quot;_td1_squared&quot;)
)

# export 24-motion variables ===================================================
write_csv(x = dataset_motion_24, file = &quot;dataset-motion-24.csv&quot;)</code></pre>
<p><BR><BR></p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<div class="divReferences">
<p>Friston, K. J., Williams, S., Howard, R., Frackowiak, R. S. J., &amp; Turner, R. (1996). Movement-related effects in fMRI time-series. <em>Magnetic Resonance in Medicine, 35</em>(3), 346–355. <a href="http://doi.org/10.1002/mrm.1910350312" class="uri">http://doi.org/10.1002/mrm.1910350312</a></p>
<p>Yan, C.-G., Cheung, B., Kelly, C., Colcombe, S., Craddock, R. C., Di Martino, A., … Milham, M. P. (2013). A comprehensive assessment of regional variation in the impact of head micromovements on functional connectomics. <em>NeuroImage, 76</em>, 183–201. <a href="http://doi.org/10.1016/j.neuroimage.2013.03.004" class="uri">http://doi.org/10.1016/j.neuroimage.2013.03.004</a></p>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiQ2FsY3VsYXRlIDI0LU1vdGlvbiBWYXJpYWJsZXMiCnN1YnRpdGxlOiAiQSBxdWljayBndWlkZSB0byBjYWxjdWxhdGluZyAyNC1tb3Rpb24gdmFyaWFibGVzIgpkYXRlOiAiT3JpZ2luYWwgUG9zdDogMjAxOC0wMy0yMCIKb3V0cHV0OiAKICBodG1sX2RvY3VtZW50OgogICAgaGlnaGxpZ2h0OiB0ZXh0bWF0ZQogICAgdGhlbWU6IGx1bWVuCiAgICBjb2RlX2ZvbGRpbmc6IHNob3cKICAgIGNvZGVfZG93bmxvYWQ6IHRydWUKICAgIHRvYzogeWVzCiAgICB0b2NfZGVwdGg6IDMKICAgIHRvY19mbG9hdDoKICAgICAgY29sbGFwc2VkOiB5ZXMKICAgICAgc21vb3RoX3Njcm9sbDogeWVzCi0tLQoKPGg0PjxpPk1vZGlmaWVkIFBvc3Q6IDIwMTgtMDktMDY8L2k+PC9oND4KPGg0PjxpPk1vZGlmaWVkIFBvc3Q6IDIwMTktMDMtMjQ8L2k+PC9oND4KPGJyPipUYWdzOiogPHNwYW4gY2xhc3M9ImJhZGdlIGJhZGdlLXBpbGwgYmFkZ2UtZGFyayI+Zk1SSTwvc3Bhbj4KPHNwYW4gY2xhc3M9ImJhZGdlIGJhZGdlLXBpbGwgYmFkZ2UtcHJpbWFyeSI+Ujwvc3Bhbj4KClRoZXNlIG1vdGlvbiB2YXJpYWJsZXMgY2FuIGJlIHVzZWQgYXMgY29udHJvbCB2YXJpYWJsZXMgKGNvdmFyaWF0ZXMgb2Ygbm8gaW50ZXJlc3Q7IGFzIHNlZW4gaW4gcmVzdGluZy1zdGF0ZSBhbmQgdGFzay1iYXNlZCBmdW5jdGlvbmFsIGNvbm5lY3Rpdml0eSBhbmFseXNlcykuIAoKIyMgUiBMaWJyYXJpZXMKYGBge3IsIG1lc3NhZ2UgPSBGfQpsaWJyYXJ5KHRpZHl2ZXJzZSkKYGBgCgojIyBGdW5jdGlvbgpgYGB7cn0KIyBncmFwaCBtb3Rpb24gcGFyYW1ldGVycywgZmFjZXQgYnkgbW90aW9uIHR5cGUKZ3JhcGhfbW90aW9uIDwtIGZ1bmN0aW9uKGRhdGFzZXQsIHRpdGxlKSB7CiAgZGF0YV9sb25nIDwtIHJlc2hhcGUyOjptZWx0KGRhdGFzZXQsIGlkLnZhciA9ICJEdXJhdGlvbiIpICU+JQogICAgbXV0YXRlKHZhcmlhYmxlID0gZ3N1YigiXyIsICIgIiwgdmFyaWFibGUpKQogIGZpZ3VyZSA8LSBnZ3Bsb3QoZGF0YV9sb25nLCBhZXMoeCA9IER1cmF0aW9uLCB5ID0gdmFsdWUpKSArCiAgICBnZW9tX2xpbmUoY29sb3IgPSAiIzEwNmE4YyIpICsKICAgIHRoZW1lX21pbmltYWwoKSArCiAgICBmYWNldF93cmFwKH4gdmFyaWFibGUsIHNjYWxlcyA9ICJmcmVlX3kiLCBuY29sID0gMykgKwogICAgbGFicyh0aXRsZSA9IHRpdGxlLAogICAgICAgICB5ID0gTlVMTCkgKwogICAgdGhlbWUocGxvdC50aXRsZSA9IGVsZW1lbnRfdGV4dChoanVzdCA9IDAuNSkpCiAgcHJpbnQoZmlndXJlKQp9CmBgYAoKPEJSPjxCUj4KCiMjIDYtUmlnaWQgQm9keSBNb3Rpb24gUmVncmVzc29ycwoKVGhlIGZpcnN0IHNpeCBtb3Rpb24gcGFyYW1ldGVycyBhcmUgdGhlIHN0YW5kYXJkIG1vdGlvbiBwYXJhbWV0ZXJzIGFuZCBpbmNsdWRlOgoKMS4gJHRyYW5zbGF0aW9uX1gkLCB0cmFuc2xhdGlvbiBpbiB0aGUgeC1kaXJlY3Rpb24KMi4gJHRyYW5zbGF0aW9uX1kkLCB0cmFuc2xhdGlvbiBpbiB0aGUgeS1kaXJlY3Rpb24KMy4gJHRyYW5zbGF0aW9uX1okLCB0cmFuc2xhdGlvbiBpbiB0aGUgei1kaXJlY3Rpb24KNC4gJHJvdGF0aW9uX1gkLCByb3RhdGlvbiBhcm91bmQgdGhlIHgtYXhpcwo1LiAkcm90YXRpb25fWSQsIHJvdGF0aW9uIGFyb3VuZCB0aGUgeS1heGlzCjYuICRyb3RhdGlvbl9aJCwgcm90YXRpb24gYXJvdW5kIHRoZSB6LWF4aXMKCmBgYHtyIG02LCBjb2xsYXBzZWQgPSBUUlVFLCBkZXYgPSAic3ZnIiwgbWVzc2FnZSA9IEZ9CiMgbG9hZCA2LXJpZ2lkeSBib2R5IG1vdGlvbiBwYXJhbWV0ZXJzCiMgYWRkIGR1cmF0aW9uCm1vdGlvbl9maWxlIDwtICJibG9nX0NhbGN1bGF0ZV9Nb3Rpb25fUmVncmVzc29yc19maWxlcy9leGFtcGxlX21vdGlvbl9kZW1lYW5kLmNzdiIKbW90aW9uX2RlbWVhbmVkIDwtIHJlYWRfY3N2KG1vdGlvbl9maWxlLCBjb2xfbmFtZXMgPSBGKSAlPiUKICBtdXRhdGUoRHVyYXRpb24gPSBjKDE6bnJvdyguKSkpCgojIHJlbmFtZSBjb2x1bW5zCm1vdGlvbl92YXJpYWJsZXMgPC0gYyhwYXN0ZTAoIlRyYW5zbGF0aW9uXyIsIGMoIlgiLCAiWSIsICJaIikpLAogICAgICAgICAgICAgICAgICAgICAgcGFzdGUwKCJSb3RhdGlvbl8iLCBjKCJYIiwgIlkiLCAiWiIpKSkKY29sbmFtZXMobW90aW9uX2RlbWVhbmVkKSA8LSBjKG1vdGlvbl92YXJpYWJsZXMsICJEdXJhdGlvbiIpCgojIGdyYXBoIG1vdGlvbiBwYXJhbWV0ZXJzCmdyYXBoX21vdGlvbihtb3Rpb25fZGVtZWFuZWQsICI2LVJpZ2lkIEJvZHkgTW90aW9uIFBhcmFtZXRlcnMiKQpgYGAKCjxCUj48QlI+CgojIyAxMi1Nb3Rpb24gUmVncmVzc29ycwoKVGhlIG5leHQgc2l4IG1vdGlvbiBwYXJhbWV0ZXJzIGFyZSB0aGUgZmlyc3QgdGVtcG9yYWwgZGVyaXZhdGl2ZXMgb2YgdGhlIG9yaWdpbmFsIHNpeCByaWdpZCBib2R5IG1vdGlvbiBwYXJhbWV0ZXJzLiBTcGVjaWZpY2FsbHksIGl0IGlzIHRoZSBtb3Rpb24gbWludXMgdGhlIG1vdGlvbiBmcm9tIHRoZSBwcmV2aW91cyB0aW1lIHBvaW50LgoKNy4gJHRyYW5zbGF0aW9uX3tYX3tULTF9fSQsIGZpcnN0IHRlbXBvcmFsIGRlcml2YXRpdmUgb2YgdGhlIHRyYW5zbGF0aW9uIGluIHRoZSB4LWRpcmVjdGlvbgo4LiAkdHJhbnNsYXRpb25fe1lfe1QtMX19JCwgZmlyc3QgdGVtcG9yYWwgZGVyaXZhdGl2ZSBvZiB0aGUgdHJhbnNsYXRpb24gaW4gdGhlIHktZGlyZWN0aW9uCjkuICR0cmFuc2xhdGlvbl97Wl97VC0xfX0kLCBmaXJzdCB0ZW1wb3JhbCBkZXJpdmF0aXZlIG9mIHRoZSB0cmFuc2xhdGlvbiBpbiB0aGUgei1kaXJlY3Rpb24KMTAuICRyb3RhdGlvbl97WF97VC0xfX0kIGZpcnN0IHRlbXBvcmFsIGRlcml2YXRpdmUgb2YgdGhlIHJvdGF0aW9uIGFyb3VuZCB0aGUgeC1heGlzCjExLiAkcm90YXRpb25fe1lfe1QtMX19JCwgZmlyc3QgdGVtcG9yYWwgZGVyaXZhdGl2ZSBvZiB0aGUgcm90YXRpb24gYXJvdW5kIHRoZSB5LWF4aXMKMTIuICRyb3RhdGlvbl97Wl97VC0xfX0kLCBmaXJzdCB0ZW1wb3JhbCBkZXJpdmF0aXZlIG9mIHRoZSByb3RhdGlvbiBhcm91bmQgdGhlIHotYXhpcwoKYGBge3IgbTEyLCBjb2xsYXBzZWQgPSBUUlVFLCB3YXJuaW5nID0gRkFMU0UsIGRldiA9ICJzdmcifQojIGNhbGN1bGF0ZSBmaXJzdCB0ZW1wb3JhbCBkZXJpdmF0aXZlCm1vdGlvbl9kZW1lYW5lZF90ZDEgPC0gbW90aW9uX2RlbWVhbmVkICU+JQogIHNhcHBseSguLCBGVU4gPSBmdW5jdGlvbih4KSBjKE5BLCBkaWZmKHgpKSkgJT4lCiAgYXNfdGliYmxlKCkgJT4lCiAgbXV0YXRlKER1cmF0aW9uID0gYygxOm5yb3coLikpKQogIAojIHJlbmFtZSBjb2x1bW5zCmNvbG5hbWVzKG1vdGlvbl9kZW1lYW5lZF90ZDEpIDwtIGMocGFzdGUwKG1vdGlvbl92YXJpYWJsZXMsICJfVEQxIiksICJEdXJhdGlvbiIpCgojIGdyYXBoIG1vdGlvbiBwYXJhbWV0ZXJzCmdyYXBoX21vdGlvbihtb3Rpb25fZGVtZWFuZWRfdGQxLCAiRmlyc3QgVGVtcG9yYWwgRGVyaXZhdGl2ZXMgb2YgdGhlIDYtUmlnaWQgQm9keSBNb3Rpb24gUGFyYW1ldGVycyIpCmBgYAoKPEJSPjxCUj4KCiMjIDE4LU1vdGlvbiBSZWdyZXNzb3JzCgpUaGUgbmV4dCBzaXggbW90aW9uIHBhcmFtZXRlcnMgYXJlIHRoZSBvcmlnaW5hbCBzaXggcmlnaWQgYm9keSBtb3Rpb24gcGFyYW1ldGVycyBzcXVhcmVkOgoKMTMuICR0cmFuc2xhdGlvbl9YXjIkLCB0cmFuc2xhdGlvbiBpbiB0aGUgeC1kaXJlY3Rpb24gc3F1YXJlZAoxNC4gJHRyYW5zbGF0aW9uX1leMiQsIHRyYW5zbGF0aW9uIGluIHRoZSB5LWRpcmVjdGlvbiBzcXVhcmVkCjE1LiAkdHJhbnNsYXRpb25fWl4yJCwgdHJhbnNsYXRpb24gaW4gdGhlIHotZGlyZWN0aW9uIHNxdWFyZWQKMTYuICRyb3RhdGlvbl9YXjIkLCByb3RhdGlvbiBhcm91bmQgdGhlIHgtYXhpcyBzcXVhcmVkCjE3LiAkcm90YXRpb25fWV4yJCwgcm90YXRpb24gYXJvdW5kIHRoZSB5LWF4aXMgc3F1YXJlZAoxOC4gJHJvdGF0aW9uX1peMiQsIHJvdGF0aW9uIGFyb3VuZCB0aGUgei1heGlzIHNxdWFyZWQKCmBgYHtyIG0xOCwgY29sbGFwc2VkID0gVFJVRSwgZGV2ID0gInN2ZyJ9CiMgc3F1YXJlIDYtcmlnaWQgYm9keSBtb3Rpb24gcGFyYW1ldGVycwptb3Rpb25fZGVtZWFuZWRfc3EgPC0gbW90aW9uX2RlbWVhbmVkXjIgJT4lCiAgYXNfdGliYmxlKCkgJT4lCiAgbXV0YXRlKER1cmF0aW9uID0gYygxOm5yb3coLikpKQogIAojIHJlbmFtZSBjb2x1bW5zCmNvbG5hbWVzKG1vdGlvbl9kZW1lYW5lZF9zcSkgPC0gYyhwYXN0ZTAobW90aW9uX3ZhcmlhYmxlcywgIl9TcXVhcmVkIiksICJEdXJhdGlvbiIpCgojIGdyYXBoIG1vdGlvbiBwYXJhbWV0ZXJzCmdyYXBoX21vdGlvbihtb3Rpb25fZGVtZWFuZWRfc3EsICI2LVJpZ2lkIEJvZHkgTW90aW9uIFBhcmFtZXRlcnMgU3F1YXJlZCIpCmBgYAoKPEJSPjxCUj4KCiMjIDI0LU1vdGlvbiBSZWdyZXNzb3JzCgpUaGUgbmV4dCBzaXggbW90aW9uIHBhcmFtZXRlcnMgYXJlIHRoZSBmaXJzdCB0ZW1wb3JhbCBkZXJpdmF0aXZlcyBzcXVhcmVkLgoKMTkuICR0cmFuc2xhdGlvbl97WF97VC0xfX1eMiQsIGZpcnN0IHRlbXBvcmFsIGRlcml2YXRpdmUgb2YgdGhlIHRyYW5zbGF0aW9uIGluIHRoZSB4LWRpcmVjdGlvbiBzcXVhcmVkCjIwLiAkdHJhbnNsYXRpb25fe1lfe1QtMX19XjIkLCBmaXJzdCB0ZW1wb3JhbCBkZXJpdmF0aXZlIG9mIHRoZSB0cmFuc2xhdGlvbiBpbiB0aGUgeS1kaXJlY3Rpb24gc3F1YXJlZAoyMS4gJHRyYW5zbGF0aW9uX3taX3tULTF9fV4yJCwgZmlyc3QgdGVtcG9yYWwgZGVyaXZhdGl2ZSBvZiB0aGUgdHJhbnNsYXRpb24gaW4gdGhlIHotZGlyZWN0aW9uIHNxdWFyZWQKMjIuICRyb3RhdGlvbl97WF97VC0xfX1eMiQsIGZpcnN0IHRlbXBvcmFsIGRlcml2YXRpdmUgb2YgdGhlIHJvdGF0aW9uIGFyb3VuZCB0aGUgeC1heGlzIHNxdWFyZWQKMjMuICRyb3RhdGlvbl97WV97VC0xfX1eMiQgZmlyc3QgdGVtcG9yYWwgZGVyaXZhdGl2ZSBvZiB0aGUgcm90YXRpb24gYXJvdW5kIHRoZSB5LWF4aXMgc3F1YXJlZAoyNC4gJHJvdGF0aW9uX3taX3tULTF9fV4yJCwgZmlyc3QgdGVtcG9yYWwgZGVyaXZhdGl2ZSBvZiB0aGUgcm90YXRpb24gYXJvdW5kIHRoZSB6LWF4aXMgc3F1YXJlZAoKYGBge3IgbTI0LCBjb2xsYXBzZWQgPSBUUlVFLCB3YXJuaW5nID0gRkFMU0UsIGRldiA9ICJzdmcifQoKIyBzcXVhcmUgdGhlIGZpcnN0IHRlbXBvcmFsIGRlcml2YXRpdmUKbW90aW9uX2RlbWVhbmVkX3RkMV9zcSA8LSBtb3Rpb25fZGVtZWFuZWRfdGQxXjIgJT4lCiAgYXNfdGliYmxlKCkgJT4lCiAgbXV0YXRlKER1cmF0aW9uID0gMTpucm93KC4pKSAKCiMgcmVuYW1lIGNvbHVtbnMKY29sbmFtZXMobW90aW9uX2RlbWVhbmVkX3RkMV9zcSkgPC0gYyhwYXN0ZTAobW90aW9uX3ZhcmlhYmxlcywgIl9URDFfU3F1YXJlZCIpLCAiRHVyYXRpb24iKQoKIyBwbG90IG1vdGlvbi50ZDEuc3EgaW50byBvbmUgZmlndXJlCmdyYXBoX21vdGlvbihtb3Rpb25fZGVtZWFuZWRfdGQxX3NxLCAiRmlyc3QgVGVtcG9yYWwgRGVyaXZhdGl2ZXMgb2YgdGhlIDYtUmlnaWQgQm9keSBNb3Rpb24gUGFyYW1ldGVycyBTcXVhcmVkIikKYGBgCgo8QlI+PEJSPgoKIyMgUiBDb2RlIEV4YW1wbGUKYGBge3Igc2NyaXB0LCBldmFsID0gRkFMU0UsIGNvbGxhcHNlID0gRkFMU0UsIGluY2x1ZGUgPSBUUlVFLCBlY2hvID0gVFJVRX0KCiMgZnVuY3Rpb24gdG8gY3JlYXRlIDI0IG1vdGlvbiB2YXJpYWJsZXMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CmNyZWF0ZV8yNF9tb3Rpb25fdmFyaWFibGVzIDwtIGZ1bmN0aW9uKGRhdGFzZXQpIHsKICAjIG1lYW4tY2VudGVyIChkZW1lYW4pIC0tLS0KICAjIHN1YnRyYWN0IGVhY2ggc2NvcmUgZnJvbSBpdHMgcmVzcGVjdGl2ZSBjb2x1bW4gbWVhbgogIGRhdGFzZXRfbW90aW9uX2RlbWVhbmVkIDwtIHNjYWxlKHggPSBkYXRhc2V0LCBjZW50ZXIgPSBULCBzY2FsZSA9IEYpCgogICMgZmlyc3QgdGVtcG9yYWwgZGVyaXZhdGl2ZXMgLS0tLQogICMgc3VidHJhY3QgbW90aW9uIGZyb20gcHJpb3IgbW90aW9uIHRpbWUgcG9pbnQKICBkYXRhc2V0X21vdGlvbl90ZDEgPC0gc2FwcGx5KGRhdGFzZXRfbW90aW9uX2RlbWVhbmVkLCBGVU4gPSBmdW5jdGlvbih4KSBjKE5BLCBkaWZmKHgpKSkKCiAgIyBjb21iaW5lIHRoZSB2YXJpYWJsZXMgaW50byBvbmUgZGF0YXNldAogIGRhdGFzZXRfbW90aW9uIDwtIGRhdGEuZnJhbWUoZGF0YXNldF9tb3Rpb25fZGVtZWFuZWQsIGRhdGFzZXRfbW90aW9uX3RkMSkKCiAgIyBzcXVhcmVzIC0tLS0KICAjIHNxdWFyZSA2LXJpZ2lkIGJvZHkgbW90aW9uIHBhcmFtZXRlcnMgYW5kIGl0cyB0ZW1wb3JhbCBkZXJpdmF0aXZlcwogIGRhdGFzZXRfbW90aW9uX3NxdWFyZWQgPC0gZGF0YXNldF9tb3Rpb25eMgoKICAjIGNvbWJpbmUgdGhlIHZhcmlhYmxlcyBpbnRvIG9uZSBkYXRhc2V0CiAgZGF0YXNldF9tb3Rpb24gPC0gZGF0YS5mcmFtZShkYXRhc2V0X21vdGlvbiwgZGF0YXNldF9tb3Rpb25fc3F1YXJlZCkKCiAgcmV0dXJuKGRhdGFzZXRfbW90aW9uKQp9CgojIGxvYWQgNi1yaWdpZCBib2R5IG1vdGlvbiBwYXJhbWV0ZXJzIGZpbGUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIGFzc2lnbiB0byBkYXRhc2V0X21vdGlvbgpkYXRhc2V0X21vdGlvbiA8LSByZWFkLmNzdihmaWxlLmNob29zZSgpKQoKIyBjcmVhdGUgMjQgbW90aW9uIHZhcmlhYmxlcyB1c2luZyBmdW5jdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBhc3NpZ24gb3V0cHV0IHRvIGRhdGFzZXRfbW90aW9uXzI0CmRhdGFzZXRfbW90aW9uXzI0IDwtIGNyZWF0ZV8yNF9tb3Rpb25fdmFyaWFibGVzKGRhdGFzZXQgPSBkYXRhc2V0X21vdGlvbikKCiMgcmVuYW1lIGNvbHVtbnMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgYXNzaWduIG9yaWdpbmFsIG1vdGlvbiB2YXJpYWJsZXMKbW90aW9uX3ZhcmlhYmxlcyA8LSBjKAogICJ0cmFuc2xhdGlvbl94IiwgInRyYW5zbGF0aW9uX3kiLCAidHJhbnNsYXRpb25feiIsCiAgInJvdGF0aW9uX3giLCAicm90YXRpb25feSIsICJyb3RhdGlvbl96IgopCgojIHJlbmFtZSBjb2x1bW5zCmNvbG5hbWVzKGRhdGFzZXRfbW90aW9uXzI0KSA8LSBjKAogIG1vdGlvbl92YXJpYWJsZXMsCiAgcGFzdGUwKG1vdGlvbl92YXJpYWJsZXMsICJfdGQxIiksCiAgcGFzdGUwKG1vdGlvbl92YXJpYWJsZXMsICJfc3F1YXJlZCIpLAogIHBhc3RlMChtb3Rpb25fdmFyaWFibGVzLCAiX3RkMV9zcXVhcmVkIikKKQoKIyBleHBvcnQgMjQtbW90aW9uIHZhcmlhYmxlcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0Kd3JpdGVfY3N2KHggPSBkYXRhc2V0X21vdGlvbl8yNCwgZmlsZSA9ICJkYXRhc2V0LW1vdGlvbi0yNC5jc3YiKQpgYGAKCjxCUj48QlI+CgojIyBSZWZlcmVuY2VzCgo8ZGl2IGNsYXNzPSJkaXZSZWZlcmVuY2VzIj4KRnJpc3RvbiwgSy4gSi4sIFdpbGxpYW1zLCBTLiwgSG93YXJkLCBSLiwgRnJhY2tvd2lhaywgUi4gUy4gSi4sICYgVHVybmVyLCBSLiAoMTk5NikuIE1vdmVtZW50LXJlbGF0ZWQgZWZmZWN0cyBpbiBmTVJJIHRpbWUtc2VyaWVzLiAqTWFnbmV0aWMgUmVzb25hbmNlIGluIE1lZGljaW5lLCAzNSooMyksIDM0NuKAkzM1NS4gaHR0cDovL2RvaS5vcmcvMTAuMTAwMi9tcm0uMTkxMDM1MDMxMgoKWWFuLCBDLi1HLiwgQ2hldW5nLCBCLiwgS2VsbHksIEMuLCBDb2xjb21iZSwgUy4sIENyYWRkb2NrLCBSLiBDLiwgRGkgTWFydGlubywgQS4sIOKApiBNaWxoYW0sIE0uIFAuICgyMDEzKS4gQSBjb21wcmVoZW5zaXZlIGFzc2Vzc21lbnQgb2YgcmVnaW9uYWwgdmFyaWF0aW9uIGluIHRoZSBpbXBhY3Qgb2YgaGVhZCBtaWNyb21vdmVtZW50cyBvbiBmdW5jdGlvbmFsIGNvbm5lY3RvbWljcy4gKk5ldXJvSW1hZ2UsIDc2KiwgMTgz4oCTMjAxLiBodHRwOi8vZG9pLm9yZy8xMC4xMDE2L2oubmV1cm9pbWFnZS4yMDEzLjAzLjAwNAo8L2Rpdj4KCgo=</div>
</div>
</div>
</div>
<div class="footer" style="red">
  <hr style="solid 1px">
  &copy; 2018 Ekarin Eric Pongpipat. <a href="https://raw.githubusercontent.com/epongpipat/epongpipat.github.io/master/LICENSE" target="_blank">All rights reserved.</a>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
