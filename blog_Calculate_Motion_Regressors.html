---
title: "Calculate Motion Regressors"
subtitle: "A quick guide to calculating motion regressors"
date: "2018-03-13"
output: 
  html_document:
    highlight: textmate
    theme: lumen
    toc: yes
    toc_depth: 3
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---



<p><em>Tags:</em> <span class="badge badge-pill badge-dark">fMRI</span> <span class="badge badge-pill badge-primary">R</span></p>
<p><BR><BR></p>
<div id="rigid-body-motion-regressors" class="section level2">
<h2>6-Rigid Body Motion Regressors</h2>
<p>The first six motion parameters are motion parameters that are obtained from a software of choice and include:</p>
<ol style="list-style-type: decimal">
<li>x, translation in x-direction</li>
<li>y, translation in the y-direction</li>
<li>z, translation in the z-direction</li>
<li>roll, rotation around the x-axis</li>
<li>pitch, rotation around the y-axis</li>
<li>yaw, rotation around the z-axis</li>
</ol>
<p><BR><BR></p>
</div>
<div id="motion-regressors" class="section level2">
<h2>12-Motion Regressors</h2>
<p>The next six motion parameters are the original six rigid body motion parameters squared and include:</p>
<ol start="7" style="list-style-type: decimal">
<li>x^2, translation in x-direction squared</li>
<li>y^2, translation in the y-direction squared</li>
<li>z^2, translation in the z-direction squared</li>
<li>roll^2, rotation around the x-axis squared</li>
<li>pitch^2, rotation around the y-axis squared</li>
<li>yaw^2, rotation around the z-axis squared</li>
</ol>
<p><BR><BR></p>
</div>
<div id="motion-regressors-1" class="section level2">
<h2>18-Motion Regressors</h2>
<p>The next six motion parameters are the first temporal derivates of the original six rigid body motion parameters. Specifically, it is the motion minus the motion from the previous time point.</p>
<ol start="13" style="list-style-type: decimal">
<li>x_td, first temporal derivative of translation in the x-direction</li>
<li>y_td, first temporal derivative of translation in the y-direction</li>
<li>z_td, first temporal derivative of translation in the z-direction</li>
<li>roll_td, first temporal derivative of rotation around the x-axis</li>
<li>pitch_td, first temporal derivative of rotation around the y-axis</li>
<li>yaw_td, first temporal derivative of rotation around the z-axis</li>
</ol>
<p><BR><BR></p>
</div>
<div id="motion-regressors-2" class="section level2">
<h2>24-Motion Regressors</h2>
<p>The next six motion parameters are the first temporal derivatives squared.</p>
<ol start="19" style="list-style-type: decimal">
<li>x_td_sq, first temporal derivative of translation in the x-direction squared</li>
<li>y_td_sq, first temporal derivative of translation in the y-direction squared</li>
<li>z_td_sq, first temporal derivative of translation in the z-direction squared</li>
<li>roll_td_sq, first temporal derivative of rotation around the x-axis squared</li>
<li>pitch_td_sq, first temporal derivative of rotation around the y-axis squared</li>
<li>yaw_td_sq, first temporal derivative of rotation around the z-axis squared</li>
</ol>
<p><BR><BR></p>
</div>
<div id="motion-regressors-3" class="section level2">
<h2>30-Motion Regressors</h2>
<p>The next six motion parameters are the second temporal derivatives of the original six rigid body motion parameters. Specifically, it is the motion minus the motion from the two previous time points.</p>
<ol start="25" style="list-style-type: decimal">
<li>x_td2, second temporal derivative of translation in the x-direction</li>
<li>y_td2, second temporal derivative of translation in the y-direction</li>
<li>z_td2, second temporal derivative of translation in the z-direction</li>
<li>roll_td2, second temporal derivative of rotation around the x-axis</li>
<li>pitch_td2, second temporal derivative of rotation around the y-axis</li>
<li>yaw_td2, second temporal derivative of rotation around the z-axis</li>
</ol>
<p><BR><BR></p>
</div>
<div id="motion-regressors-4" class="section level2">
<h2>36-Motion Regressors</h2>
<p>The next six motion parameters are the second temporal derivatives squared.</p>
<ol start="31" style="list-style-type: decimal">
<li>x_td2_sq, second temporal derivative of translation in the x-direction squared</li>
<li>y_td2_sq, second temporal derivative of translation in the y-direction squared</li>
<li>z_td2_sq, second temporal derivative of translation in the z-direction squared</li>
<li>roll_td2_sq, second temporal derivative of rotation around the x-axis squared</li>
<li>pitch_td2_sq, second temporal derivative of rotation around the y-axis squared</li>
<li>yaw_td2_sq, second temporal derivative of rotation around the z-axis square</li>
</ol>
<p><BR><BR></p>
</div>
<div id="r-script" class="section level2">
<h2>R Script</h2>
<pre class="r"><code># load 6-motion parameters
m1 &lt;- rnorm(1:10)
m2 &lt;- rnorm(1:10)
m3 &lt;- rnorm(1:10)
m4 &lt;- rnorm(1:10)
m5 &lt;- rnorm(1:10)
m6 &lt;- rnorm(1:10)

dataset &lt;- data.frame(m1,m2,m3,m4,m5,m6)
colnames(dataset) &lt;- c(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;roll&quot;,&quot;pitch&quot;,&quot;yaw&quot;)

# 12-motion parameters

dataset.sq &lt;- dataset^2 # square 6-rigid body motion parameters
colnames(dataset.sq) &lt;- c(&quot;x.sq&quot;,&quot;y.sq&quot;,&quot;z.sq&quot;,&quot;roll.sq&quot;,&quot;pitch.sq&quot;,&quot;yaw.sq&quot;) # rename columns

dataset.12mp &lt;- data.frame(dataset,dataset.sq) # combine the 12-motion parameters into one dataset

# 24-motion parameters

dataset.td1 &lt;- sapply(dataset, FUN=function(x) c(NA,diff(x))) # subtract motion from prior motion time point
colnames(dataset.td1) &lt;- c(&quot;x.td1&quot;,&quot;y.td1&quot;,&quot;z.td1&quot;,&quot;roll.td1&quot;,&quot;pitch.td1&quot;,&quot;yaw.td1&quot;) # rename columns 

dataset.td1.sq &lt;- dataset.td1^2 # square td1
colnames(dataset.td1.sq ) &lt;- c(&quot;x.td1.sq &quot;,&quot;y.td1.sq &quot;,&quot;z.td1.sq &quot;,&quot;roll.td1.sq &quot;,&quot;pitch.td1.sq &quot;,&quot;yaw.td1.sq &quot;) # rename columns

dataset.24mp &lt;- data.frame(dataset.12mp,dataset.td1,dataset.td1.sq) # combine the 24-motion parameters into one dataset

# 36-motion parameters

dataset.td2 &lt;- sapply(dataset, FUN=function(x) c(NA,NA,diff(x, lag=2))) # subtract motion from the motion of two prior time points
colnames(dataset.td2) &lt;- c(&quot;x.td2&quot;,&quot;y.td2&quot;,&quot;z.td2&quot;,&quot;roll.td2&quot;,&quot;pitch.td2&quot;,&quot;yaw.td2&quot;) # rename columns

dataset.td2.sq &lt;- dataset.td2^2 # square td2
colnames(dataset.td2.sq ) &lt;- c(&quot;x.td2.sq &quot;,&quot;y.td2.sq &quot;,&quot;z.td2.sq &quot;,&quot;roll.td2.sq &quot;,&quot;pitch.td2.sq &quot;,&quot;yaw.td2.sq &quot;) # rename columns 

dataset.36mp &lt;- data.frame(dataset.24mp,dataset.td2,dataset.td2.sq) # combine the 36-motion parameters into one dataset</code></pre>
<p><BR><BR></p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
</div>
